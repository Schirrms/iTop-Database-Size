<?xml version="1.0" encoding="UTF-8"?>
<itop_design xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0">
	<constants>
	</constants>
	<classes>
		<class id="DBServer" _delta="must_exist">
			<fields>
				<field id="UsedSpace" xsi:type="AttributeDecimal" _delta="define">
					<sql>usedspace</sql>
					<default_value/>
					<is_null_allowed>true</is_null_allowed>
					<digits>18</digits>
					<decimals>0</decimals>
					<tracking_level>none</tracking_level>
				</field>
			</fields>
			<methods>
				<method id="GetAsHTML" _delta="define">
					<static>false</static>
					<access>public</access>
					<type>Overload-DBObject</type>
					<code><![CDATA[ public function GetAsHTML($sValue, $bLocalize = true)
					{
						$sHTMLValue = parent::GetAsHTML($sValue, $oHostObject, $bLocalize);
						if(($sHTMLValue !== null) && ($sHTMLValue !== '') && ($sValue === 'UsedSpace'))
						{
							// Converting space in human readable value only
							$sHumanSize = $sHTMLValue." B";
							if(is_numeric($sHTMLValue))
							{
								$sUnit = ' KMGTP';
								for ($iLevel=50; $iLevel >0 ;$iLevel=$iLevel-10)
								{
									if ($sHTMLValue >= 2**$iLevel)
									{
										$sHumanSize = sprintf('%.3g ', $sHTMLValue / (2**$iLevel)) . substr($sUnit, $iLevel/3, 1) . 'iB';
										break;
									}
								}
							}
							return $sHumanSize;
						}
						else
						{
							return parent::GetAsHTML($sAttCode, $bLocalize);
						}
					}]]>
					</code>
				</method>
			</methods>
			<presentation>
				<details>
					<items>
						<item id="UsedSpace" _delta="define">
							<rank>95</rank>
						</item>
					</items>
				</details>
			</presentation>
		</class>
	</classes>
	<menus>
	</menus>
	<user_rights>
		<groups>
		</groups>
		<profiles>
		</profiles>
	</user_rights>
</itop_design>
